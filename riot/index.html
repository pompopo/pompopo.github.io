<meta charset="utf-8" />
<title>Riotテスト</title>
<script src='https://cdnjs.cloudflare.com/ajax/libs/riot/2.3.18/riot+compiler.js'></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.indigo-pink.min.css">
<script defer src="https://code.getmdl.io/1.1.3/material.min.js"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<item />

<script type="riot/tag">
<item>
  <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
    <header class="mdl-layout__header">
      <div class="mdl-layout__header-row">
        <span data-badge={items.length} class="material-icons mdl-badge mdl-badge--overlap">
          <span class="mdl-layout-title">
            TODO
          </span>
        </span>
        <div class="mdl-layout-spacer"></div>
      </div>
    </header>
    <main class="mdl-layout__content mdl-grid">
      <div class="page-content">
        <form onsubmit={add}>
        <div class="mdl-textfield mdl-js-textfield">
          <input class="mdl-textfield__input" type="text" id="text">
          <label class="mdl-textfield__label" for="text">なにか入力...</label>
        </div>
        <button type="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect   mdl-button--accent">追加</button>
        </form>
        <ul class="mdl-list">
          <li each={item in items} class="mdl-list__item">
            <span class="mdl-list__item-primary-content">
              {item}
            </span>
            <a onclick={parent.remove} class="mdl-list__item-secondary-action" href="#">
              <i class="material-icons">clear</i>
            </a>
          </li>
        </ul>
      </div>
    </main>
  </div>

  this.items = [];
  add(e) {
    var text = document.getElementById('text');
    if (text.value.length > 0) {
      this.items.push(text.value);
    }
    text.value = '';
  }

  remove(e) {
    var item = e.item.item
    var index = this.items.indexOf(item)
    if (index >= 0) {
      this.items.splice(index, 1)
    }
  }
</item>
</script>

<script>riot.mount('item');</script>
